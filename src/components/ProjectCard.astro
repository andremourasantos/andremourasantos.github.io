---
import Button from "./Button.astro";
import ButtonGroup from "./ButtonGroup.astro";

interface Props {
  title:string,
  description:string,
  imageName:string,
  postId:string,
  link:string,
  isDraft:boolean
}

const { title, description, imageName, postId, link, isDraft } = Astro.props;

let imagePath;
try {
  imagePath = await import(`../assets/photos/${imageName}.jpg`).then((res) => {return res.default.src});
} catch (error) {
  imagePath = await import(`../assets/photos/test.jpg`).then((res) => {return res.default.src});
}
---
<div class="card" class:list={isDraft ? 'isDraftContent' : ''}>
  <img src={imagePath} alt={imagePath}>
  <div class="content">
    <h3>{title} {isDraft ? " (em breve)" : ""}</h3>
    <p>{description}</p>
    {
      isDraft ?
      <ButtonGroup groupTemplate="commingSoonArticle" groupTemplateBtnSize="S" groupTemplateSecondBtnId={postId} groupOrientation="rowAdaptable" groupBtnQuantity={2}/>
      :
      <a href={link} rel="next"><Button btnSize="S" btnText="Ler mais" btnType="tertiary"/></a>
    }
  </div>
</div>

<style>
  .card {
    min-width: fit-content;
    height: fit-content;
    display: flex;
    flex-direction: column;
    border: 1px solid var(--colors-border_line_color);
  }

  img {
    width: 100%;
    aspect-ratio: 16/9;
    object-fit: cover;
  }

  

  .content {
    padding: var(--padding_2x);
  }

  .content p {
    margin-bottom: var(--padding_2x);
  }
</style>