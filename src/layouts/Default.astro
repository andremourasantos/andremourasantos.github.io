---
import '../assets/main.css';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';

interface Props {
  title: string,
  description: string,
  imageName?:string,
  pageType:"webiste"|"article",
  pubDate?:Date,
  updatedDate?:Date
}

const { title, description, imageName, pageType, pubDate, updatedDate } = Astro.props;

const SITE_URL = import.meta.env.PUBLIC_SITE_URL;

let imagePath;
try {
  imagePath = await import(`../assets/photos/${imageName}.jpg`).then((res) => {return res.default.src});
} catch (error) {
  imagePath = await import(`../assets/photos/default.jpg`).then((res) => {return res.default.src});
}

const absoluteImagePath = `${SITE_URL}${imagePath}`;
const absolutePageUrl = `${SITE_URL}${Astro.url.pathname}`;
---

<html lang="pt-br">
  <head>
    <!--STANDARD TAGS-->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <meta name="description" content={description}>
    <meta name="generator" content={Astro.generator} />
    <link rel="shortcut icon" href="/favicon.png" type="image/png">

    <!--OPEN GRAPH TAGS-->
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:url" content={absolutePageUrl} />
    <meta property="og:image" content={absoluteImagePath} />
    <meta property="og:type" content={pageType} />
    <meta property="og:locale" content="pt_BR" />
    <meta property="og:site_name" content="André S." />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    {pubDate && <meta property="article:published_time" content={pubDate.toISOString()} />}
    {updatedDate && <meta property="article:modified_time" content={updatedDate.toISOString()} />}

    <!--CRITICAL FONTS-->
    <link rel="preload" href="/fonts/Atkinson_Hyperlegible_Next/AtkinsonHyperlegibleNext-VariableFont_wght.ttf" as="font" type="font/ttf" crossorigin>
    <link rel="preload" href="/fonts/Figtree/Figtree-VariableFont_wght.ttf" as="font" type="font/ttf" crossorigin>

    <!--MISCELLANEOUS -->
    <link rel="sitemap" href="/sitemap-index.xml" />

    <title>{title} | André S.</title>
    <!--SCRIPTS-->
    <!--GTM-->
    <script async>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= 'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-PWVNLHS');</script>
    <!--GTM-->
  </head>
  <body>
    <Header/>
    <slot/>
    <Footer/>
    <!--GTM-->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PWVNLHS" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!--GTM-->
  </body>
</html>